{% load static %}
{% include "lab_operator/charts/boilerplate.html" %}

<style>
    #aqi1 .ct-series-a .ct-line {
        /* Set the colour of this series line */
        stroke: green;
        /* Control the thikness of your lines */
        stroke-width: 3px;
        background-color: blue;
        /* Create a dashed line with a pattern */
    }

    #aqi1 .ct-series-a .ct-point {
        /* Colour of your points */
        stroke: green;
    }
</style>

<div class="ct-chart" height="600" id="aqi1">
    <div class="spinner-grow text-secondary" role="status" id="loader2">
        <span class="sr-only">Loading...</span>
    </div>
</div>
<script src="{% static 'js/chartist-plugin-threshold.js' %}"></script>
<script>
    $(document).ready(function () {
        $.getJSON("https://api.thingspeak.com/channels/1017900/fields/3.json?api_key=CQ98H95JG2IBYHNH&results=10", function (result) {
            $("#loader2").hide()
            var series = result["feeds"]
            var data = []
            var created_at = []
            
            $.each(series, function (i, s) {
                data.push(s["field3"])
                var time = s["created_at"].split("T")
                time = time[1]
                time = time.substring(0, time.length - 1)
                created_at.push(time)
            })

            console.log(data)
            console.log(created_at)
            new Chartist.Line('#aqi1', {
                labels: created_at,
                series: [data]
            }, {
                chartPadding: {
                    right: 40
                },

                lineSmooth: true,
                axisX: {
                    // We can disable the grid for this axis
                    showGrid: false,
                    // and also don't show the label

                },

                
                axisY: {
                    // We can disable the grid for this axis
                    showGrid: false,
                    // and also don't show the label
                },

            });
        })
    })


</script>
</div>