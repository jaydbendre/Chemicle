{% load static %}
{% include "lab_operator/charts/boilerplate.html" %}
<div class="ct-chart" height="600" id="temperature1">
<div class="spinner-grow text-secondary" role="status" id="loader">
<span class="sr-only">Loading...</span>
</div>
</div>
  <script src = "{% static 'js/chartist-plugin-threshold.js' %}"></script>
  <script>
  $(document).ready(function(){
    $.getJSON("https://api.thingspeak.com/channels/1017900/fields/1.json?api_key=CQ98H95JG2IBYHNH&results=10",function(result)
    {
      $("#loader").hide()
      var series = result["feeds"]
      var data = []
      var created_at = []

      $.each(series , function(i ,s){
        data.push(s["field1"])

        var time = s["created_at"].split("T")
        time = time[1]
        time = time.substring(0 , time.length-1)
        created_at.push(time)
      })


      console.log(data)
      console.log(created_at)
      new Chartist.Line('#temperature1', {
        labels: created_at, 
        series: [data]
      }, {
        chartPadding: {
          right: 40
        },
        
        lineSmooth: true,
        axisX: {
          // We can disable the grid for this axis
          showGrid: false,
          // and also don't show the label
          
        },
          
        axisY: {
          // We can disable the grid for this axis
          showGrid: false,
          // and also don't show the label
          labelInterpolationFnc: function (value) {
            return  value + 'Â°C';
          }
        },
       
      });
    })
  })

    
  </script>
</div>
